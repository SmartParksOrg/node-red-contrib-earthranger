<script type="text/html" data-help-name="er-send-message">
<p>Send a message to Earth Ranger.</p>

<h3>Internals</h3>
<h4>Inputs</h4>
<dl class="message-properties">
	<dt>payload
		<span class="property-type">object | json</span>
	</dt>
	<dd> A message object with all parameters. Formatting of the message object is found in the Details section.</dd>
</dl>

<h4>Outputs</h4>
<dl class="message-properties">
	<dt>payload <span class="property-type">object</span></dt>
	<dd>
		The response will always be published in <code>msg.payload</code> as an object.<br/>
		A good response looks like this: <br/>
		<code>
			{<br>
				"data": {<br>
					"all info about the message..."<br>
				},<br>
				"status": {<br>
					"code": 201,<br>
					"message": "Created"<br>
				}<br>
			}<br>
		</code>
	</dd>
</dl>

<h3>Details</h3>
<p>
	<code>msg.payload</code> Is used as the payload to the request.<br/>

</p>
<p> A <code>message</code> has the following attributes.</p>

<dl class="message-properties">
	<dt>sender
		<span class="property-type">string | undefined</span>
	</dt>
	<dd>The name of the sender</dd>

	<dt>receiver
		<span class="property-type">string | undefined</span>
	</dt>
	<dd>The name of the receiver</dd>

	<dt>device
		<span class="property-type">string | undefined</span>
	</dt>
	<dd>UUID of the receiving device</dd>

<dt>device
		<span class="property-type">string | default:'outbox'</span>
	</dt>
	<dd>Type of the message</dd>

	<dt>text
		<span class="property-type">string | undefined</span>
	</dt>
	<dd>the text content of the message</dd>

	<dt>status
		<span class="property-type">string | default:'pending'</span>
	</dt>
	<dd>the status of the message</dd>

	<dt>device_location
		<span class="property-type">object | undefined</span>
	</dt>
	<dd>
		Optional if you want the message to have a location.<br>
		The location object contains the following elements.
		<dl class="message-properties">
			<dt>latitude
				<span class="property-type">number</span>
			</dt>
			<dd> The latitude of your event.</dd>
			<dt>longitude
				<span class="property-type">number</span>
			</dt>
			<dd> The longitude of your event.</dd>
		</dl>
	</dd>

	<dt class="optional">message_time
		<span class="property-type">string | default: moment().toISOString()</span>
	</dt>
	<dd> The timestamp (as ISO string) your event happened.</dd>
</dl>

	<dt>read
		<span class="property-type">bool | undefined</span>
	</dt>
	<dd>is the message read?</dd>

	<dt>additional
		<span class="property-type">object | undefined</span>
	</dt>
	<dd>json object with additional information</dd>

<h3>References</h3>
<ul>
	<li><a href="https://earthranger.com/" target="_blank">Earth Ranger landing page</a> - general information to Earth Ranger.</li>
	<li><a href="https://sandbox.pamdas.org/api/v1.0/docs/index.html" target="_blank">Earth Ranger API description</a> - If you would like to go into more detail.</li>
	<li><a href="https://github.com/adminfriso/node-red-contrib-earthranger" target="_blank">GitHub</a> - the Earth Ranger contrib repository.</li>
</ul>
</script>
