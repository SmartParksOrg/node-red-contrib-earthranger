<script type="text/html" data-help-name="er-send-event">
<p>Send an event to Earth Ranger.</p>

<h3>Internals</h3>
<h4>Inputs</h4>
<dl class="message-properties">
	<dt>payload
		<span class="property-type">object | json</span>
	</dt>
	<dd> An event object with all parameters. Formatting of the event object is found in the Details section.</dd>
</dl>

<h4>Outputs</h4>
<dl class="message-properties">
	<dt>payload <span class="property-type">object</span></dt>
	<dd>
		The response will always be published in <code>msg.payload</code> as an object.<br/>
		A good response looks like this: <br/>
		<code>
			{<br>
				"data": {<br>
					"all info about the event..."<br>
				},<br>
				"status": {<br>
					"code": 201,<br>
					"message": "Created"<br>
				}<br>
			}<br>
		</code>
	</dd>
</dl>

<h3>Details</h3>
<p>
	<code>msg.payload</code> Is used as the payload to the request.<br/>

</p>
<p> An <code>event</code> has the following attributes.</p>

<dl class="message-properties">
	<dt>event_type
		<span class="property-type">string | required</span>
	</dt>
	<dd>please find all event types in your Earth Ranger config (https://yoursubdomain.pamdas.org/admin/activity/eventtype/)</dd>
	<dt>event_details
		<span class="property-type">object | undefined</span>
	</dt>
	<dd>The formatting of the event details is found in the detailed view of an event type (Schema, and then in the schema under properties)</dd>

	<dt>priority
		<span class="property-type">number (0 or between and equal to 100-300) | default:0</span>
	</dt>
	<dd>The higher the more important.</dd>
	<dt>location
		<span class="property-type">object | undefined</span>
	</dt>
	<dd>
		Optional if you want the event to have a location.<br>
		The location object contains the following elements.
		<dl class="message-properties">
			<dt>latitude
				<span class="property-type">number</span>
			</dt>
			<dd> The latitude of your event.</dd>
			<dt>longitude
				<span class="property-type">number</span>
			</dt>
			<dd> The longitude of your event.</dd>
		</dl>
	</dd>

	<dt class="optional">time
		<span class="property-type">string | default: moment().toISOString()</span>
	</dt>
	<dd> The timestamp (as ISO string) your event happened.</dd>
</dl>

<h3>References</h3>
<ul>
	<li><a href="https://earthranger.com/" target="_blank">Earth Ranger landing page</a> - general information to Earth Ranger.</li>
	<li><a href="https://sandbox.pamdas.org/api/v1.0/docs/index.html" target="_blank">Earth Ranger API description</a> - If you would like to go into more detail.</li>
	<li><a href="https://github.com/adminfriso/node-red-contrib-earthranger" target="_blank">GitHub</a> - the Earth Ranger contrib repository.</li>
</ul>
</script>
